@page
@using Microsoft.AspNetCore.Identity
@using No1_Online.Models
@addTagHelper *, Microsoft.AspNetCore.Mvc.TagHelpers
@addTagHelper *, Microsoft.AspNetCore.Mvc.RazorPages
@inject SignInManager<AppUser> signInManager

@model No1_Online.Pages.ReportsManagementModel

@{
    ViewData["Title"] = "Reports Management";
}

<div class="container py-5">
    <div class="row mb-4">
        <div class="col-12 col-md-6">
            <input class="form-control" type="search" placeholder="Search Reports" aria-label="Search" id="reportSearchBox">
        </div>
        <div class="col-12 col-md-auto mt-3 mt-md-0">
            <button class="btn btn-outline-success w-100" id="reportSearchButton" type="button">Search</button>
        </div>
    </div>
    <div class="accordion" id="reportAccordion">
        <!-- Income All Vehicles Reports -->
        <div class="card">
            <div class="card-header" id="headingIncomeAllVehicles">
                <h2 class="mb-0">
                    <button class="btn btn-link" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIncomeAllVehicles" aria-expanded="true" aria-controls="collapseIncomeAllVehicles">
                        Income All Vehicles
                    </button>
                </h2>
            </div>
            <div id="collapseIncomeAllVehicles" class="collapse show" aria-labelledby="headingIncomeAllVehicles" data-bs-parent="#reportAccordion">
                <div class="card-body">
                    <div class="list-group">
                        @foreach (var report in Model.Reports)
                        {
                            <div class="list-group-item d-flex justify-content-between align-items-center">
                                <span class="report-name">@report</span>
                                <div>
                                    <button class="btn btn-info btn-sm me-2" onclick="toggleMetadata('@report')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                                            <path d="M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14m0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16" />
                                            <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 1.178-.252 1.465-.598l.088-.416c-.2.176-.492.246-.686.246-.275 0-.375-.193-.304-.533zM9 4.5a1 1 0 1 1-2 0 1 1 0 0 1 2 0" />
                                        </svg>
                                    </button>
                                    <a href="/Reports/Download?name=@report" class="btn btn-success btn-sm me-2">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                                            <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5" />
                                            <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z" />
                                        </svg>
                                    </a>
                                    <button class="btn btn-danger btn-sm" onclick="deleteReport('@report')">
                                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                                            <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5" />
                                        </svg>
                                    </button>
                                </div>
                            </div>
                            <div class="list-group-item metadata-item" id="metadata-@report" style="display: none;">
                                <p><strong>Report Name:</strong> @report</p>
                                <p><strong>Generated On:</strong> @DateTime.Now</p>
                                <p><strong>Size:</strong> 1.2 MB</p>
                                <!-- Add more metadata details as needed -->
                            </div>
                        }
                        @if (!Model.Reports.Any())
                        {
                            <div class="list-group-item text-center">
                                No reports available.
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>

        <!-- Income Per Vehicle Reports -->
        <div class="card">
            <div class="card-header" id="headingIncomePerVehicle">
                <h2 class="mb-0">
                    <button class="btn btn-link collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseIncomePerVehicle" aria-expanded="false" aria-controls="collapseIncomePerVehicle">
                        Income Per Vehicle
                    </button>
                </h2>
            </div>
            <div id="collapseIncomePerVehicle" class="collapse" aria-labelledby="headingIncomePerVehicle" data-bs-parent="#reportAccordion">
                <div class="card-body">
                    <div class="list-group">
                        @* @foreach (var report in Model.IncomePerVehicleReports)
                        {
                        <div class="list-group-item d-flex justify-content-between align-items-center">
                        <span class="report-name">@report</span>
                        <div>
                        <button class="btn btn-info btn-sm me-2" onclick="toggleMetadata('@report')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-info-circle" viewBox="0 0 16 16">
                        <path d="M8 1a7 7 0 1 0 0 14A7 7 0 0 0 8 1zm0 13A6 6 0 1 1 8 2a6 6 0 0 1 0 12z"/>
                        <path d="m8.93 6.588-2.29.287-.082.38.45.083c.294.07.352.176.288.469l-.738 3.468c-.194.897.105 1.319.808 1.319.545 0 .918-.252 1.036-.598l.088-.416c.04-.19.078-.287.116-.287h.007c.12 0 .192.084.216.287l.088.416c.118.346.49.598 1.036.598.703 0 1.002-.422.808-1.319l-.738-3.468c-.064-.293-.006-.399.288-.469l.45-.083-.082-.38-2.29-.287zm-.933-.428c.237 0 .433-.216.433-.483 0-.267-.196-.483-.433-.483-.237 0-.433.216-.433.483 0 .267.196.483.433.483z"/>
                        </svg>
                        </button>
                        <a href="/Reports/Download?name=@report" class="btn btn-success btn-sm me-2">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-download" viewBox="0 0 16 16">
                        <path d="M.5 9.9a.5.5 0 0 1 .5.5v2.5a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-2.5a.5.5 0 0 1 1 0v2.5a2 2 0 0 1-2 2H2a2 2 0 0 1-2-2v-2.5a.5.5 0 0 1 .5-.5"/>
                        <path d="M7.646 11.854a.5.5 0 0 0 .708 0l3-3a.5.5 0 0 0-.708-.708L8.5 10.293V1.5a.5.5 0 0 0-1 0v8.793L5.354 8.146a.5.5 0 1 0-.708.708z"/>
                        </svg>
                        </a>
                        <button class="btn btn-danger btn-sm" onclick="deleteReport('@report')">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-trash3-fill" viewBox="0 0 16 16">
                        <path d="M11 1.5v1h3.5a.5.5 0 0 1 0 1h-.538l-.853 10.66A2 2 0 0 1 11.115 16h-6.23a2 2 0 0 1-1.994-1.84L2.038 3.5H1.5a.5.5 0 0 1 0-1H5v-1A1.5 1.5 0 0 1 6.5 0h3A1.5 1.5 0 0 1 11 1.5m-5 0v1h4v-1a.5.5 0 0 0-.5-.5h-3a.5.5 0 0 0-.5.5M4.5 5.029l.5 8.5a.5.5 0 1 0 .998-.06l-.5-8.5a.5.5 0 1 0-.998.06m6.53-.528a.5.5 0 0 0-.528.47l-.5 8.5a.5.5 0 0 0 .998.058l.5-8.5a.5.5 0 0 0-.47-.528M8 4.5a.5.5 0 0 0-.5.5v8.5a.5.5 0 0 0 1 0V5a.5.5 0 0 0-.5-.5"/>
                        </svg>
                        </button>
                        </div>
                        </div>
                        <div class="list-group-item metadata-item" id="metadata-@report" style="display: none;">
                        <p><strong>Report Name:</strong> @report</p>
                        <p><strong>Generated On:</strong> @DateTime.Now</p>
                        <p><strong>Size:</strong> 1.2 MB</p>
                        <!-- Add more metadata details as needed -->
                        </div>
                        }
                        @if (!Model.IncomePerVehicleReports.Any())
                        {
                        <div class="list-group-item text-center">
                        No reports available.
                        </div>
                        } *@
                    </div>
                </div>
            </div>
        </div>

        <!-- Add more sections for other types of reports as needed -->
    </div>
</div>

@section Scripts {
    <script>

        
    </script>
}
